{% extends "base.html" %}
<!--{% import '_snippets.html' as snippets %}-->

{% block title %}
Validate Datasets
{% endblock %}

<!--{% block bodyclass %}search{% endblock %}-->

{% block content %}
<div class="container">
    <div class="inner_container">
        <div class="row">
            <div class="col-md-7 col-md-offset-2 col-sm-12">
                <h1>Data Package Validator</h1>
                <form class="search-form form form-inline" class="input-group col-xs-12" action="/tools/validate" method="GET">
                    <input type="text" class="form-control input-lg" placeholder="Paste link to your datapackage.json" name="q" value="{{ query }}" required autofocus/>
                    <button class="btn btn-primary" type="submit">Validate</button>
                </form>
            </div>
        </div>
        <div class="row">
            <div class="col-md-7 col-md-offset-2 col-sm-12">
                {% if loading_error %}
                    <h3>Error loading data package:</h3>
                    {{ loading_error }}
                {% endif %}

                {% if dataset %}
                    <h2>
                        Descriptor is
                        {% if valid == true %}
                        Valid
                        {% else %}
                        Invalid
                        {% endif %}
                    </h2>
                {% endif %}

                {% if errors.length > 0 %}
                    {{ errors }}
                {% endif %}

                {% if dataset %}
                    <h3>Datapackage:</h3>
                    <h4>Name: <strong>{{ dataset.descriptor.name }}</strong></h4>
                    {% if dataset.descriptor.title %}
                        <h4>Title: <strong>{{ dataset.descriptor.title }}</strong></h4>
                    {% endif %}
                    <h4>Resources:</h4>
                    <ul>
                        {% for name in dataset.resourceNames %}
                        <li>{{name}}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
